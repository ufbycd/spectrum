#include "hal.h"
/************************************
函数名：显示时间 年程序
调  用：void Time_Year_show(void)
结  果：显示
备  注：
/***********************************/
void Time_Year_display(void)
{
	if(menu==0)
    {
		LED_rectangle_erasure(1,1,62,30,0);    //擦除指定的矩形框
	}
	Miao_color=Green;
	LED_8X16_write(9,0,ss/10+48,    Miao_color,Noml);//写8X16字符秒钟十位
	LED_8X16_write( 1,0,ss%10+48,    Miao_color,Noml);//写8X16字符秒钟个位
	LED_write_english_string(39,0,":" ,Red,Noml);//写8X16字符冒号	
	LED_8X16_write(32,0,mm/10+48,    Green,Noml);//写8X16字符分钟十位
	LED_8X16_write(24,0,mm%10+48,    Green,Noml);//写8X16字符分钟个位
	LED_write_english_string(16,0,":", Red,Noml);//写8X16字符冒号
	LED_8X16_write(55,0,hh/10+48,    Green,Noml);//写8X16字符小时十位
	LED_8X16_write(47,0,hh%10+48,    Green,Noml);//写8X16字符小时个位

	LED_write_english_string(40,15,"02", Red,Noml);//写8X16字符冒号
	LED_8X16_write (31,15, yy/10+48,Red,  Noml);//写8X16字符正显(XX)年
	LED_8X16_write (23,15, yy%10+48,Red,  Noml);//写8X16字符正显(XX)年
	LED_16X16_write(7,15,    10,   Green,Noml);//写16X16中文汉字年
}
/************************************
函数名：显示时间 月日程序
调  用：void Time_Month_display(void)
结  果：显示
备  注：
/***********************************/
void Time_Month_display(void)
{
	if(menu==0)
    {
		LED_rectangle_erasure(1,1,62,30,0);    //擦除指定的矩形框
	}
	Miao_color=Red;
	LED_write_english_string(16,0,":", Green,Noml);//写8X16字符冒号
	LED_8X16_write(9,0,ss/10+48,    Miao_color,Noml);//写8X16字符秒钟十位
	LED_8X16_write( 1,0,ss%10+48,    Miao_color,Noml);//写8X16字符秒钟个位
	LED_write_english_string(39,0,":" ,Green,Noml);//写8X16字符冒号	
	LED_8X16_write(32,0,mm/10+48,    Red,Noml);//写8X16字符分钟十位
	LED_8X16_write(24,0,mm%10+48,    Red,Noml);//写8X16字符分钟个位
	
	LED_8X16_write(55,0,hh/10+48,    Red,Noml);//写8X16字符小时十位
	LED_8X16_write(47,0,hh%10+48,    Red,Noml);//写8X16字符小时个位
	
	LED_8X16_write (55,15,mo/10+48,Orgen,  Noml);//写8X16字符正显(XX)月
	LED_8X16_write (47,15,mo%10+48,Orgen,  Noml);//写8X16字符正显(XX)月
	LED_16X16_write(31,15,11,      Green,  Noml);//写16X16中文汉字月正显
	LED_8X16_write (23,15,dd/10+48,Orgen,  Noml);//写8X16字符正显(XX)日
	LED_8X16_write (15,15,dd%10+48,Orgen,  Noml);//写8X16字符正显(XX)日
	LED_16X16_write(0,15,12,      Green,  Noml);//写16X16中文汉字日正显
}
/************************************
函数名：显示时间 星期程序
调  用：void Time_Month_display(void)
结  果：显示
备  注：
/***********************************/
void Time_Week_display(void)
{
	if(menu==0)
    {
		LED_rectangle_erasure(1,1,62,30,0);    //擦除指定的矩形框
	}
	Miao_color=Orgen;
	LED_write_english_string(16,0,":", Green,Noml);//写8X16字符冒号
	LED_8X16_write(9,0,ss/10+48,    Miao_color,Noml);//写8X16字符秒钟十位
	LED_8X16_write( 1,0,ss%10+48,    Miao_color,Noml);//写8X16字符秒钟个位
	LED_write_english_string(39,0,":" ,Green,Noml);//写8X16字符冒号	
	LED_8X16_write(32,0,mm/10+48,    Orgen,Noml);//写8X16字符分钟十位
	LED_8X16_write(24,0,mm%10+48,    Orgen,Noml);//写8X16字符分钟个位
	
	LED_8X16_write(55,0,hh/10+48,    Orgen,Noml);//写8X16字符小时十位
	LED_8X16_write(47,0,hh%10+48,    Orgen,Noml);//写8X16字符小时个位
	
	LED_16X16_write(39,15,16,     Green,Noml);//写16X16中文汉字星
	LED_16X16_write(23,15,17,     Green,Noml);//写16X16中文汉字期
	if(week<7)                               //不是星期天
	LED_16X16_write(7,15,week-1,   Red,Noml);    //写16X16中文汉字星期几
	else                                      //星期天
	LED_16X16_write(7,15,12,       Red,Noml);    //写16X16中文汉字/日
}
/************************************
函数名：显示时间 农历程序
调  用：nongli_display()
结  果：农历显示
备  注：
/***********************************/
void nongli_display(void)
{
    //Read_temperature();                   //读取温湿度
	if(menu==0)
    {
		LED_rectangle_erasure(1,1,62,30,0);    //擦除指定的矩形框
	}
	Miao_color=Red;
	LED_write_english_string(16,0,":", Green,Noml);//写8X16字符冒号
	LED_8X16_write(9,0,ss/10+48,    Red,Noml);//写8X16字符秒钟十位
	LED_8X16_write( 1,0,ss%10+48,    Red,Noml);//写8X16字符秒钟个位
	LED_write_english_string(39,0,":" ,Green,Noml);//写8X16字符冒号	
	LED_8X16_write(32,0,mm/10+48,    Red,Noml);//写8X16字符分钟十位
	LED_8X16_write(24,0,mm%10+48,    Red,Noml);//写8X16字符分钟个位
	
	LED_8X16_write(55,0,hh/10+48,    Red,Noml);//写8X16字符小时十位
	LED_8X16_write(47,0,hh%10+48,    Red,Noml);//写8X16字符小时个位

    switch(day_moon)
    {
    case  1:
    case  2:
    case  3:
    case  4:
    case  5:
    case  6:
    case  7:
    case  8:
    case  9:
    case 10:
	   LED_16X16_write(16,15, 20, Green,Noml);
	   LED_16X16_write(1,15, day_moon-1, Green,Noml);
	   break;//写16X16中文汉字 初一到初十

    case 11:
    case 12:
    case 13:
    case 14:
    case 15:
    case 16:
    case 17:
    case 18:
    case 19:
		LED_16X16_write(16,15, 9, Green,Noml); 
		LED_16X16_write(1,15, day_moon-11, Green,Noml); 
		break;//写16X16中文汉字 十一 到 十九

    case 20:
		  LED_16X16_write(0,15, 9, Green,Noml); 
		  LED_16X16_write(16,15, 1, Green,Noml);//二十 
		 	//LED16X64_write("    二十",Green,Noml);
		  break;

    case 21:
    case 22:
    case 23:
    case 24:
    case 25:
    case 26:
    case 27:
    case 28:
    case 29:
		LED_16X16_write(1,15, day_moon-21, Green,Noml);// 
		LED_16X16_write(16,15, 21, Green,Noml);//廿
		//LED16X64_write("    廿九",Green,Noml);
		break;
    case 30:
		 LED_16X16_write(1,15, 9, Green,Noml);//十 
		 LED_16X16_write(16,15, 2, Green,Noml);//三
	//	LED16X64_write("    三十",Green,Noml);
		break;
    }
    //LED16X64_write("  月",Red,Noml);
	LED_16X16_write(32,15, 11, Red,Noml);//月
    switch(month_moon)
    {
    case  1:LED_16X16_write(48,15, 22, Green,Noml);break;//正
    case  2:
    case  3:
    case  4:
    case  5:
    case  6:
    case  7:
    case  8:
    case  9:
    case 10:
	LED_16X16_write(48,15, month_moon-1, Green,Noml);
	break;//二 到 九
    case 11:LED_16X16_write(48,15, 23, Green,Noml);break; //冬
    case 12:LED_16X16_write(48,15, 24, Green,Noml);break; //腊
    }
}
/************************************
函数名：显示温度程序
调  用：temperature()
参  数：
返回值：无
结  果：在32X64屏上写温度
备  注：
/***********************************/
void temperature_display(void)
{
     
	Read_temperature();                   //读取温湿度
	if(menu==0)
    {
		LED_rectangle_erasure(1,1,62,30,0);    //擦除指定的矩形框
	}
	Miao_color=Red;
	LED_write_english_string(16,0,":", Green,Noml);//写8X16字符冒号
	LED_8X16_write(9,0,ss/10+48,    Miao_color,Noml);//写8X16字符秒钟十位
	LED_8X16_write( 1,0,ss%10+48,    Miao_color,Noml);//写8X16字符秒钟个位
	LED_write_english_string(39,0,":" ,Green,Noml);//写8X16字符冒号	
	LED_8X16_write(32,0,mm/10+48,    Red,Noml);//写8X16字符分钟十位
	LED_8X16_write(24,0,mm%10+48,    Red,Noml);//写8X16字符分钟个位
	
	LED_8X16_write(55,0,hh/10+48,    Red,Noml);//写8X16字符小时十位
	LED_8X16_write(47,0,hh%10+48,    Red,Noml);//写8X16字符小时个位
	
	LED_16X16_write(48,16,18,     Green,Noml);//写16X16中文汉字 温
	LED_16X16_write(32,16,19,     Green,Noml);//写16X16中文汉字 度

	LED_8X16_write(24,16,(TMP)/10+48,Red,1);//写8X16字符
    LED_8X16_write(16,16,(TMP)%10+48,Red,1);//写8X16字符

	LED_16X16_write(0,16,52,     Green,Noml);//写16X16中文汉字 ℃

   
  //  LED16X64_write("温度  ℃",Green,Noml);//预写入温度和符号
 // //  if(LEDup_dow)                         //正向显示
//    {
       
 //   }
  //  else                                 //倒置显示
  //  {
   //     LED_8X16_write(33,1,(TMP)/10+48,Red,1);//写8X16字符
  //      LED_8X16_write(41,1,(TMP)%10+48,Red,1);//写8X16字符
   // }
}
/************************************
函数名：显示湿度程序
调  用：temperature()
参  数：
返回值：无
结  果：在32X64屏上写温度
备  注：
/***********************************/
void RHTerature_display(void)
{
     
//	Read_temperature();                   //读取温湿度
	if(menu==0)
    {
		LED_rectangle_erasure(1,1,62,30,0);    //擦除指定的矩形框
	}
	Miao_color=Green;
	LED_write_english_string(16,0,":", Red,Noml);//写8X16字符冒号
	LED_8X16_write(9,0,ss/10+48,    Miao_color,Noml);//写8X16字符秒钟十位
	LED_8X16_write( 1,0,ss%10+48,    Miao_color,Noml);//写8X16字符秒钟个位
	LED_write_english_string(39,0,":" ,Red,Noml);//写8X16字符冒号	
	LED_8X16_write(32,0,mm/10+48,    Green,Noml);//写8X16字符分钟十位
	LED_8X16_write(24,0,mm%10+48,    Green,Noml);//写8X16字符分钟个位
	
	LED_8X16_write(55,0,hh/10+48,    Green,Noml);//写8X16字符小时十位
	LED_8X16_write(47,0,hh%10+48,    Green,Noml);//写8X16字符小时个位
	
	LED_16X16_write(48,16,53,     Red,Noml);//写16X16中文汉字 湿
	LED_16X16_write(32,16,19,     Red,Noml);//写16X16中文汉字 度

	LED_8X16_write(24,16,(RHT)/10+48,Green,1);//写8X16字符
    LED_8X16_write(16,16,(RHT)%10+48,Green,1);//写8X16字符

	LED_16X16_write(0,16,54,     Red,Noml);//写16X16中文汉字 ％

   
  //  LED16X64_write("温度  ℃",Green,Noml);//预写入温度和符号
 // //  if(LEDup_dow)                         //正向显示
//    {
       
 //   }
  //  else                                 //倒置显示
  //  {
   //     LED_8X16_write(33,1,(TMP)/10+48,Red,1);//写8X16字符
  //      LED_8X16_write(41,1,(TMP)%10+48,Red,1);//写8X16字符
   // }
}
/***********************************************************/
/*;*******************************************************************************
;程序名称:time_to_buffjiqi().
;功能    :节气加载
;修改日期:2011.05.15
;*********************************************************************************/
void JIQI_24buff(void) //24节气计算和字符加载程序
{
    uchar   solar_term;			            //定义节气变量                 
	solar_term=Get_24Solar_term();		    //节气判断
   // LED_rectangle_erasure(1,1,63,31,0);     //擦除指定的矩形框
   if(menu==0)
    {
		LED_rectangle_erasure(1,1,62,30,0);    //擦除指定的矩形框
	}
    switch(solar_term)
 	{  
 	case  1:
			LED_16X16_write(16,16,57,     Red,Noml);//写16X16中文汉字 小
			LED_16X16_write(0,16,58,     Red,Noml);//写16X16中文汉字 寒	
			break;
    case  2:
			LED_16X16_write(16,16,59,     Red,Noml);//写16X16中文汉字 大
			LED_16X16_write(0,16,58,     Red,Noml);//写16X16中文汉字 寒	
			break;
    case  3:
			LED_16X16_write(16,16,60,     Red,Noml);//写16X16中文汉字 立
			LED_16X16_write(0,16,61,     Red,Noml);//写16X16中文汉字 春	
			break;
    case  4:
			LED_16X16_write(16,16,62,     Red,Noml);//写16X16中文汉字 雨
			LED_16X16_write(0,16,63,     Red,Noml);//写16X16中文汉字 水
			break;
			
    case  5:
			LED_16X16_write(16,16,64,     Red,Noml);//写16X16中文汉字 惊
			LED_16X16_write(0,16,65,     Red,Noml);//写16X16中文汉字 蛰
			break;	
		
    case  6:
			LED_16X16_write(16,16,61,     Red,Noml);//写16X16中文汉字 春
			LED_16X16_write(0,16,14,     Red,Noml);//写16X16中文汉字 分
			break;	
		
    case  7:
			LED_16X16_write(16,16,65,     Red,Noml);//写16X16中文汉字 清
			LED_16X16_write(0,16,67,     Red,Noml);//写16X16中文汉字 明
			break;
			
    case  8:
			LED_16X16_write(16,16,68,     Red,Noml);//写16X16中文汉字 谷
			LED_16X16_write(0,16,62,     Red,Noml);//写16X16中文汉字  雨
			break;
		
    case  9:
			LED_16X16_write(16,16,60,     Red,Noml);//写16X16中文汉字 立
			LED_16X16_write(0,16,69,     Red,Noml);//写16X16中文汉字  夏
			break;
		//	LED16X64_write("    夏",Red,Noml);break;	  //立
    case 10:
			LED_16X16_write(16,16,57,     Red,Noml);//写16X16中文汉字 小
			LED_16X16_write(0,16,70,     Red,Noml);//写16X16中文汉字  满
			break;
			
    case 11:
			LED_16X16_write(16,16,71,     Red,Noml);//写16X16中文汉字 芒
			LED_16X16_write(0,16,72,     Red,Noml);//写16X16中文汉字  种
			break;
			
    case 12:
			LED_16X16_write(16,16,69,     Red,Noml);//写16X16中文汉字 夏
			LED_16X16_write(0,16,73,     Red,Noml);//写16X16中文汉字  至
			break;
			
    case 13:
			LED_16X16_write(16,16,57,     Red,Noml);//写16X16中文汉字 小
			LED_16X16_write(0,16,74,     Red,Noml);//写16X16中文汉字 暑
			break;
			
    case 14:
			LED_16X16_write(16,16,59,     Red,Noml);//写16X16中文汉字 大
			LED_16X16_write(0,16,74,     Red,Noml);//写16X16中文汉字 暑
			break;
			
    case 15:
			LED_16X16_write(16,16,60,     Red,Noml);//写16X16中文汉字 立
			LED_16X16_write(0,16,75,     Red,Noml);//写16X16中文汉字 秋
			break;
			
    case 16:					  
			LED_16X16_write(16,16,76,     Red,Noml);//写16X16中文汉字 处
			LED_16X16_write(0,16,74,     Red,Noml);//写16X16中文汉字 暑
			break;
			
    case 17:
		   	LED_16X16_write(16,16,77,     Red,Noml);//写16X16中文汉字 白
			LED_16X16_write(0,16,78,     Red,Noml);//写16X16中文汉字 露
			break;
			//LED16X64_write("    白露",Red,Noml);break;	  //
    case 18:
			LED_16X16_write(16,16,75,     Red,Noml);//写16X16中文汉字 秋
			LED_16X16_write(0,16,14,     Red,Noml);//写16X16中文汉字 分
			break;
			
	case 19:
			LED_16X16_write(16,16,58,     Red,Noml);//写16X16中文汉字 寒
			LED_16X16_write(0,16,78,     Red,Noml);//写16X16中文汉字 露
			break;
		
    case 20:
			LED_16X16_write(16,16,80,     Red,Noml);//写16X16中文汉字 霜
			LED_16X16_write(0,16,81,     Red,Noml);//写16X16中文汉字 降
			break;
		
    case 21:
			LED_16X16_write(16,16,60,     Red,Noml);//写16X16中文汉字 立
			LED_16X16_write(0,16,82,     Red,Noml);//写16X16中文汉字 冬
			break;			
			//LED16X64_write("    立冬",Red,Noml);break;	  //
    case 22:
			LED_16X16_write(16,16,57,     Red,Noml);//写16X16中文汉字 小
			LED_16X16_write(0,16,83,     Red,Noml);//写16X16中文汉字 雪
			break;	
			
    case 23:
			LED_16X16_write(16,16,59,     Red,Noml);//写16X16中文汉字 大
			LED_16X16_write(0,16,83,     Red,Noml);//写16X16中文汉字 雪
			break;			
    case 24:
			LED_16X16_write(16,16,82,     Red,Noml);//写16X16中文汉字 冬
			LED_16X16_write(0,16,73,     Red,Noml);//写16X16中文汉字 至
			break;			
    default:
        switc= 7; 
		windw=7;                      
        break;
    }
    if(solar_term>0&&solar_term<25)
    {
        //LED16X64_write("",Green,Noml);
		Miao_color=Green;
		LED_write_english_string(16,0,":", Red,Noml);//写8X16字符冒号
		LED_8X16_write(9,0,ss/10+48,    Miao_color,Noml);//写8X16字符秒钟十位
		LED_8X16_write( 1,0,ss%10+48,    Miao_color,Noml);//写8X16字符秒钟个位
		LED_write_english_string(39,0,":" ,Red,Noml);//写8X16字符冒号	
		LED_8X16_write(32,0,mm/10+48,    Green,Noml);//写8X16字符分钟十位
		LED_8X16_write(24,0,mm%10+48,    Green,Noml);//写8X16字符分钟个位
		
		LED_8X16_write(55,0,hh/10+48,    Green,Noml);//写8X16字符小时十位
		LED_8X16_write(47,0,hh%10+48,    Green,Noml);//写8X16字符小时个位
		
		LED_16X16_write(48,16,84,     Green,Noml);//写16X16中文汉字 今
		LED_16X16_write(32,16,51,     Green,Noml);//写16X16中文汉字 天
       // jieqi_bit=1;
    }                 //有节气做个标记
//    else
//    {
//       // Time_Year_display();
//
//		//jieqi_bit=0;
//		//LED16X64_write("        ",Green,Noml);
//    }
}
/***************************************************************************************/
/*显示生肖-----------------------------------------------------*/
void LED_w_nl(void)
{
    unsigned char LunarYearD,ReYear,tiangan,dizhi;        //农历年份的十进制数  和取模后的余数
    //调用函数后,原有数据不变,读c_moon农历世纪,year_moon农历年,month_moon,day_moon得出阴历BCD数据
    
	LunarYearD=year_moon;//(year_moon/10)*10+year_moon%10;        //农历年转换成10进制数
    ReYear=LunarYearD%12;                             //农历年模12,取余运算
    tiangan=LunarYearD%10;                            //计算农历年对应的天干
    dizhi=LunarYearD%12;                              //计算农历年对应的地支
    if(menu==0)
    {
		LED_rectangle_erasure(1,1,62,30,0);    //擦除指定的矩形框
	}
	Miao_color=Green;
	LED_write_english_string(16,0,":", Red,Noml);//写8X16字符冒号
	LED_8X16_write(9,0,ss/10+48,    Miao_color,Noml);//写8X16字符秒钟十位
	LED_8X16_write( 1,0,ss%10+48,    Miao_color,Noml);//写8X16字符秒钟个位
	LED_write_english_string(39,0,":" ,Red,Noml);//写8X16字符冒号	
	LED_8X16_write(32,0,mm/10+48,    Green,Noml);//写8X16字符分钟十位
	LED_8X16_write(24,0,mm%10+48,    Green,Noml);//写8X16字符分钟个位
	
	LED_8X16_write(55,0,hh/10+48,    Green,Noml);//写8X16字符小时十位
	LED_8X16_write(47,0,hh%10+48,    Green,Noml);//写8X16字符小时个位
	/**********************************************************************/
	LED_16X16_write(0,16,10,     Green,Noml);//写16X16中文汉字 年
//-------------------------------------------------------------------------   

	LED_16X16_write(16,16,85+ReYear,   Red,Noml);//写16X16中文汉字 
	
//-----------------------------------------------------------------------
	LED_16X16_write(32,16,97+dizhi,   Orgen,Noml);//写16X16中文汉字 //余0即整除地支辰
   
   	LED_16X16_write(48,16,109+tiangan,   Green,Noml);//写16X16中文汉字 //余0即整除天干庚

//-----------------------------------------------------------------------

}
/***************************************************************************************/
void Time_compensate(void)
{

	LED_16X16_write(48,0,29,     Red,Noml);//写16X16中文汉字 时
    	LED_16X16_write(32,0,48,     Red,Noml);//写16X16中文汉字 间
			LED_16X16_write(16,0,49,     Red,Noml);//写16X16中文汉字 补
				LED_16X16_write(0,0,50,     Red,Noml);//写16X16中文汉字 偿

	if(read_clock(10,TimeCH_OCHARGE) == 1) //校时加/减显示
	LED_write_english_string(56,16,"+", Red,Noml);//写8X16字符 + 号
	else if(read_clock(10,TimeCH_OCHARGE) == 0)
	LED_write_english_string(56,16,"-", Red,Noml);//写8X16字符 - 号

	LED_8X16_write(48,16,read_clock(10,TimeCH_NumTime)/10+48, Green,Noml);////补偿量十位的显示
	LED_8X16_write(40,16,read_clock(10,TimeCH_NumTime)%10+48, Green,Noml);	//补偿量个位的显示

	LED_16X16_write(24,16,15,     Green,Noml);//写16X16中文汉字 秒
	LED_write_english_string(16,16,"/",    Green,Noml);//写8X16字符 补偿的秒数
    LED_16X16_write(0,16,51,     Green,Noml);//写16X16中文汉字 天
}
/*********************************************************************************/
/***********************************************************/
void temperature_compensate(void)
{

	LED_16X16_write(48,0,18,     Green,Noml);//写16X16中文汉字 温
    	LED_16X16_write(32,0,19,     Green,Noml);//写16X16中文汉字  度
			LED_16X16_write(16,0,49,     Green,Noml);//写16X16中文汉字 补
				LED_16X16_write(0,0,50,     Green,Noml);//写16X16中文汉字 偿

	if(read_clock(10,TempCH_OCHARGE) == 1) //温度加/减显示
		LED_16X16_write(40,16,55,     Red,Noml);//写8X16字符 正 
	else if(read_clock(10,TempCH_OCHARGE) == 0)
		LED_16X16_write(40,16,56,     Red,Noml);//写8X16字符 负

	LED_8X16_write(32,16,read_clock(10,TempCH_NumTemp)/10+48, Green,Noml);////补偿量十位的显示
	LED_8X16_write(24,16,read_clock(10,TempCH_NumTemp)%10+48, Green,Noml);	//补偿量个位的显示
    LED_16X16_write(8,16,52,     Red,Noml);//写16X16中文汉字 ℃



}
/*********************************************************************************/
